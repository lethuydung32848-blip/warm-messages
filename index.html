<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æš–å¿ƒæç¤º ğŸ’</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    margin: 0;
    padding: 0;
    background: linear-gradient(135deg, #ffe8e8, #f5f5f5);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Microsoft YaHei", sans-serif;
    height: 100vh;
    overflow: hidden;
    touch-action: manipulation;
}
.message-box {
    position: absolute;
    width: 85vw;
    max-width: 300px;
    min-height: 100px;
    padding: 20px 15px;
    border-radius: 20px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    font-size: 20px;
    font-weight: bold;
    color: #333;
    z-index: 1000;
    cursor: pointer;
    backdrop-filter: blur(10px);
    border: 2px solid rgba(255,255,255,0.3);
    transition: transform 0.2s ease;
}
.message-box:active { transform: scale(0.95); }
#startBtn {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 20px 40px;
    font-size: 22px;
    background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
    color: white;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    z-index: 10000;
    box-shadow: 0 10px 30px rgba(255,107,107,0.4);
    transition: all 0.3s ease;
}
#startBtn:active { transform: translate(-50%, -50%) scale(0.95); }
.instructions {
    position: fixed;
    bottom: 30px;
    left: 0;
    right: 0;
    text-align: center;
    color: #666;
    font-size: 14px;
    padding: 0 20px;
}
</style>
</head>
<body>
<button id="startBtn">ç‚¹å‡»æ¥æ”¶æ¸©æš– ğŸ’•</button>
<div class="instructions">ç‚¹å‡»æ¶ˆæ¯æ¡†å¯ä»¥å¿«é€Ÿå…³é—­</div>
<script>
const MESSAGES = [
    "æ—©ç‚¹ä¼‘æ¯ï½", "å¤šå–æ°´å‘€ï½", "è®°å¾—åƒé¥­ï½", "ä¿æŒå¾®ç¬‘ğŸ˜Š", "åŠ æ²¹ï¼ä½ å¯ä»¥çš„ï¼",
    "ä»Šå¤©ä¹Ÿè¦å¼€å¿ƒï¼", "ä¸€åˆ‡éƒ½ä¼šå¥½èµ·æ¥ï½", "ç¥ä½ å¥½è¿ğŸ€", "é˜³å…‰æ­£å¥½ğŸŒ", "æ”¾è½»æ¾ï½",
    "ä¿æŒçƒ­çˆ±ğŸ’–", "æ„¿ä½ å¿«ä¹å¸¸åœ¨ï½", "å¥½å¥½ç”Ÿæ´»ï½", "ç¡ä¸ªå¥½è§‰ğŸ’¤", "è®°å¾—ä¼¸æ‡’è…°ï½",
    "ç¥ä½ å¹³å®‰é¡ºå¿ƒğŸƒ", "æ¸©æŸ”ä»¥å¾…è‡ªå·±ğŸ’«", "å¿ƒæƒ…å¥½ï¼Œä¸€åˆ‡éƒ½å¥½ï½", "æœ‰ç©ºå¤šçœ‹çœ‹å¤©ğŸŒˆ", "å¥½è¿æ¥æ•²é—¨å•¦ï¼",
    "æ”¾æ…¢è„šæ­¥ä¹Ÿå¾ˆç¾ï½", "å¸Œæœ›ä¸€åˆ‡é¡ºåˆ©ï¼", "ä½ çœŸçš„å¾ˆæ£’ï¼âœ¨", "ä»Šå¤©ä¹Ÿè¦å…ƒæ°”æ»¡æ»¡ï½", "åˆ«å¿˜äº†å¾®ç¬‘å‘€ğŸ˜Š",
    "åšä¸ªå¯çˆ±çš„äººğŸŒ¸", "æ‹¥æŠ±ä»Šå¤©ï½", "é£ä¼šå¸¦æ¥å¥½æ¶ˆæ¯ï½", "ä¿æŒå¿ƒé‡Œçš„å…‰ï½", "é‡è§ç¾å¥½çš„ä¸€å¤©ğŸŒ¼",
];

function randomPastelColor() {
    const hue = Math.random() * 360;
    return `hsl(${hue}, 70%, 85%)`;
}

function heartPoints(n) {
    const points = [];
    for (let i = 0; i < n; i++) {
        const t = Math.PI * 2 * i / n;
        const x = 16 * Math.pow(Math.sin(t), 3);
        const y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);
        points.push({x, y});
    }
    const minIdx = points.reduce((minIdx, point, idx) => point.y < points[minIdx].y ? idx : minIdx, 0);
    return points.slice(minIdx).concat(points.slice(0, minIdx));
}

function createMessageBox(x, y, color, text) {
    const box = document.createElement('div');
    box.className = 'message-box';
    box.style.left = x + 'px';
    box.style.top = y + 'px';
    box.style.background = color;
    box.textContent = text;

    box.addEventListener('click', function() {
        this.style.opacity = '0';
        this.style.transform = 'scale(0.5)';
        setTimeout(() => { if(this.parentNode) this.parentNode.removeChild(this); }, 300);
    });

    return box;
}

function jitter(max = 14) {
    return Math.floor(Math.random() * (max * 2 + 1)) - max;
}

function isMobile() {
    return /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
}

function startAnimation() {
    document.getElementById('startBtn').style.display = 'none';
    if(isMobile()) startMobileAnimation();
    else startDesktopAnimation();
}

function startMobileAnimation() {
    const screenWidth = window.innerWidth;
    const screenHeight = window.innerHeight;
    const count = 18;
    const scale = Math.min(screenWidth*0.8/32, screenHeight*0.6/30);
    const centerX = screenWidth/2;
    const centerY = screenHeight/2-60;
    const points = heartPoints(count);
    const messages = [...MESSAGES].sort(() => Math.random()-0.5);
    const boxes = [];

    // ç¬¬ä¸€é˜¶æ®µï¼šå¿ƒå½¢å‡ºç°
    points.forEach((point, idx) => {
        setTimeout(() => {
            const x = Math.max(10, Math.min(centerX+point.x*scale-150+jitter(20), screenWidth-160));
            const y = Math.max(10, Math.min(centerY-point.y*scale-50+jitter(15), screenHeight-60));
            const color = randomPastelColor();
            const box = createMessageBox(x,y,color,messages[idx%messages.length]);
            box.style.opacity = '0';
            box.style.transform = 'scale(0.5)';
            document.body.appendChild(box);
            boxes.push(box);
            setTimeout(()=>{ box.style.transition='all 0.5s ease'; box.style.opacity='1'; box.style.transform='scale(1)';},50);
        }, idx*120);
    });

    // ç¬¬ä¸€é˜¶æ®µæ¶ˆå¤±ï¼Œç¬¬äºŒé˜¶æ®µå‡ºç°
    setTimeout(()=>{
        boxes.forEach(box=>{ box.style.opacity='0'; box.style.transform='scale(0.5)'; });
        setTimeout(()=>{ boxes.forEach(box=>{ if(box.parentNode) box.parentNode.removeChild(box); }); },300);

        // ç¬¬äºŒé˜¶æ®µæ¶ˆæ¯å‡ºç°ï¼ˆä¸ä¼šè‡ªåŠ¨æ¶ˆå¤±ï¼‰
        const explodeCount = 12;
        const explodeMessages = [...MESSAGES].sort(() => Math.random()-0.5);
        for(let i=0;i<explodeCount;i++){
            setTimeout(()=>{
                const x = 10 + Math.random()*(screenWidth-160);
                const y = 10 + Math.random()*(screenHeight-60);
                const color = randomPastelColor();
                const text = explodeMessages[i%explodeMessages.length];
                const box = createMessageBox(x,y,color,text);
                box.style.opacity='0';
                box.style.transform='scale(0.5)';
                document.body.appendChild(box);
                setTimeout(()=>{ box.style.transition='all 0.5s ease'; box.style.opacity='1'; box.style.transform='scale(1)';},50);
            }, i*80);
        }

        // æ˜¾ç¤ºæŒ‰é’®
        setTimeout(()=>{ 
            const btn = document.getElementById('startBtn');
            btn.style.display='block'; 
            btn.textContent='å†çœ‹ä¸€æ¬¡ âœ¨';
        }, explodeCount*80 + 500);

    }, count*120 + 1500);
}

function startDesktopAnimation(){
    const screenWidth = window.innerWidth;
    const screenHeight = window.innerHeight;
    const count = 30;
    const scale = Math.min(screenWidth*0.8/32, screenHeight*0.6/30);
    const centerX = screenWidth/2;
    const centerY = screenHeight/2-80;
    const points = heartPoints(count);
    const messages = [...MESSAGES].sort(() => Math.random()-0.5);
    const boxes = [];

    // ç¬¬ä¸€é˜¶æ®µï¼šå¿ƒå½¢å‡ºç°
    points.forEach((point, idx)=>{
        setTimeout(()=>{
            const x = centerX + point.x*scale - 150 + jitter(30);
            const y = centerY - point.y*scale - 50 + jitter(20);
            const color = randomPastelColor();
            const box = createMessageBox(x,y,color,messages[idx%messages.length]);
            box.style.opacity='0';
            box.style.transform='scale(0.5)';
            document.body.appendChild(box);
            boxes.push(box);
            setTimeout(()=>{ box.style.transition='all 0.5s ease'; box.style.opacity='1'; box.style.transform='scale(1)'; },50);
        }, idx*80);
    });

    // ç¬¬ä¸€é˜¶æ®µæ¶ˆå¤±ï¼Œç¬¬äºŒé˜¶æ®µå‡ºç°
    setTimeout(()=>{
        boxes.forEach(box=>{ box.style.opacity='0'; box.style.transform='scale(0.5)'; });
        setTimeout(()=>{ boxes.forEach(box=>{ if(box.parentNode) box.parentNode.removeChild(box); }); },300);

        // ç¬¬äºŒé˜¶æ®µæ¶ˆæ¯å‡ºç°ï¼ˆä¸ä¼šè‡ªåŠ¨æ¶ˆå¤±ï¼‰
        const explodeCount = 20;
        const explodeMessages = [...MESSAGES].sort(() => Math.random()-0.5);
        for(let i=0;i<explodeCount;i++){
            setTimeout(()=>{
                const x = 10 + Math.random()*(screenWidth-160);
                const y = 10 + Math.random()*(screenHeight-60);
                const color = randomPastelColor();
                const text = explodeMessages[i%explodeMessages.length];
                const box = createMessageBox(x,y,color,text);
                box.style.opacity='0';
                box.style.transform='scale(0.5)';
                document.body.appendChild(box);
                setTimeout(()=>{ box.style.transition='all 0.5s ease'; box.style.opacity='1'; box.style.transform='scale(1)';},50);
            }, i*60);
        }

        // æ˜¾ç¤ºæŒ‰é’®
        setTimeout(()=>{
            const btn = document.getElementById('startBtn');
            btn.style.display='block';
            btn.textContent='å†çœ‹ä¸€æ¬¡ âœ¨';
        }, explodeCount*60 + 500);

    }, count*80 + 1500);
}

document.getElementById('startBtn').addEventListener('click', startAnimation);

// é˜²æ­¢åŒå‡»ç¼©æ”¾
let lastTouchEnd = 0;
document.addEventListener('touchend',function(event){
    const now=(new Date()).getTime();
    if(now-lastTouchEnd<=300) event.preventDefault();
    lastTouchEnd=now;
},false);

</script>
</body>
</html>
